{% extends '../base.html' %}

{% block content %}

{% if messages %}
    <div id="popup-messages" style="position: fixed; top: 1rem; right: 1rem; z-index: 9999;">
        {% for message in messages %}
            <div class="message-popup {{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}

<form method="post" class="form-class">
    <h2>Logowanie</h2>
    {% csrf_token %}
    {{ form.as_p }}

    {% if form.non_field_errors %}
    <div class="form-errors">
        {% for error in form.non_field_errors %}
            <p class="error-text">- {{ error }}</p>
        {% endfor %}
    </div>
{% endif %}

    <button type="submit">Zaloguj się</button>
    <p style="margin-top: 1.5rem; text-align: center;">Nie masz konta? <a href="{% url 'register' %}">Zarejestruj się tutaj</a></p>
</form>

<script>
    document.querySelectorAll(".message-popup").forEach(el => {
        // Click to dismiss with animation
        el.addEventListener("click", () => {
            el.classList.add("fade-out");
            setTimeout(() => el.remove(), 500);
        });

        // Auto-dismiss after 5 seconds
        setTimeout(() => {
            el.classList.add("fade-out");
            setTimeout(() => el.remove(), 500);
        }, 5000);
    });
</script>


{% endblock %}